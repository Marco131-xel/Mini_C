<!-- ENCABEZADO SUPERIOR -->
<div class="top-bar">
  <h2>Mini C</h2>
  <button>Abrir</button>
  <button (click)="createProyect()">Crear</button>
  <button (click)="saveCode()">Guardar</button>
  <button (click)="toggleTerminal()">Terminal</button>
  <button (click)="showYaml()">Yaml</button>
  <button (click)="showReports()">Reportes</button>
  <button (click)="showHelp()">Ayuda</button>
  <button (click)="compileCode()">Compilar</button>
  <div class="cursor-info">
    Linea: {{currentLine}}  Columna: {{currentColumn}}
  </div>
</div>

<!-- CONTENEDOR PRINCIPAL -->
<div class="main-wrapper">
  <div class="left-panel">
    <div class="file-bar">
      <h3>Archivos</h3>
      <div class="file-buttons">
        <button>Crear</button>
        <button>Eliminar</button>
      </div>
    </div>
    <ul *ngIf="estructuraProyecto">
      <ng-template [ngTemplateOutlet]="mostrarNodo" [ngTemplateOutletContext]="{ nodo: estructuraProyecto }"></ng-template>
    </ul>    
    <ng-template #mostrarNodo let-nodo="nodo">
      <li (click)="nodo.tipo === 'archivo' && abrirArchivo(nodo)">
        <span class="file-icon">{{ nodo.tipo === 'carpeta' ? 'ğŸ“' : 'ğŸ“„' }}</span>
        <span [ngClass]="nodo.tipo === 'carpeta' ? 'folder-name' : 'file-name'">{{ nodo.nombre }}</span>
        <ul *ngIf="nodo.tipo === 'carpeta'">
          <ng-container *ngFor="let hijo of nodo.children">
            <ng-template [ngTemplateOutlet]="mostrarNodo" [ngTemplateOutletContext]="{ nodo: hijo }"></ng-template>
          </ng-container>
        </ul>
      </li>
    </ng-template>     
  </div>
  <div class="container">
    <!-- EDITOR -->
    <div class="editor-container">
      <div #lineCounter class="line-counter"></div>
      <textarea #codeEditor [(ngModel)]="codeContent" (input)="updateLineCounter()"
        (click)="updateCursorPosition()" (keydown)="updateCursorPosition()" (keyup)="updateCursorPosition()"
        spellcheck="false">
      </textarea>
    </div>

    <!-- TERMINAL -->
    <div class="terminal-container" *ngIf="showingTerminal">
      <div class="terminal-output">
        <!-- Barra de opciones -->
         <div class="terminal-tabs">
          <button (click)="showTab('salida')">Salida</button>
          <button (click)="showTab('tablaSimbolos')">Tabla Simbolos</button>
          <button (click)="showTab('errores')">Tabla Errores</button>
         </div>
        <!-- AquÃ­ pones tu salida de terminal -->
         <!-- Contenido: salida -->
    <pre *ngIf="currentTab === 'salida'">{{ terminalOutput }}</pre>

    <!-- Contenido: tabla de errores -->
    <table *ngIf="currentTab === 'errores'" class="tabla-errores">
      <thead>
        <tr>
          <th>Tipo</th>
          <th>DescripciÃ³n</th>
          <th>LÃ­nea</th>
          <th>Columna</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let error of errores">
          <td>{{ error.tipo }}</td>
          <td>{{ error.descripcion }}</td>
          <td>{{ error.fila }}</td>
          <td>{{ error.columna }}</td>
        </tr>
      </tbody>
    </table>
      </div>
    </div>
  </div>
</div>